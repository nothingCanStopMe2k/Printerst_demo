{"ast":null,"code":"var _jsxFileName = \"/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/pages/Register/Register.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { useForm } from 'react-hook-form';\nimport get from 'lodash/get';\nimport { Link } from 'react-router-dom';\nimport isEmpty from 'lodash/isEmpty';\nimport { authService } from '../../services/auth.service';\nimport { Button } from '../../components/button/button';\nimport { patternEmail } from '../../util/form';\nimport { getMess } from '../../util/message';\nimport { Field } from '../../components/Field/Field';\nimport { user } from '../../util/user';\nimport logoLogin from '../../assets/image/pinterest_PNG40.png';\nimport './Register.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register(props) {\n  _s();\n\n  var _errors$email, _errors$password, _errors$password2;\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const history = get(props, 'history', {});\n  const stateHistory = history.location.state || {};\n  const [apiError, setApiError] = useState(stateHistory.expired ? getMess('M15') : ''); // eslint-disable-next-line consistent-return\n  //Tương tự componentDidMount.\n\n  React.useEffect(() => {\n    const userInfo = user.getUserInfo();\n    const unLogin = isEmpty(userInfo);\n\n    if (!unLogin) {\n      if (userInfo.status === 'defer') return history.push('/verify');\n      return history.push('/');\n    }\n  }, []);\n\n  const onSubmit = formState => {\n    authService.register(formState).then(() => {\n      authService.login(formState).then(res => {\n        user.saveUserStorage(res.token);\n        return history.push('/verify', formState);\n      }).catch(err => {\n        const requiredNewPassword = 401;\n\n        if (err.code === requiredNewPassword) {\n          return history.push(`/change-password/${formState.email}`);\n        }\n\n        return setApiError(err.message);\n      });\n    }).catch(err => {\n      if (err.code === 400) {\n        setApiError('That email address is already registered!!');\n      } else if (err.code === 405) {\n        setApiError('These passwords do not match!!');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    className: \"register\",\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      className: \"register-content\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        className: \"register__paper\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"register__form\",\n          noValidate: true,\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            direction: \"column\",\n            justify: \"center\",\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: logoLogin,\n              className: \"logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              gutterBottom: true,\n              children: \"Create Your Account!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              gutterBottom: true,\n              children: \"No credit card required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-text\",\n            children: apiError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            helperText: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message,\n            variant: \"outlined\",\n            label: \"Email address\",\n            name: \"email\",\n            notRightLabel: true,\n            required: true,\n            inputRef: register({\n              required: getMess('M01', 'Email address'),\n              pattern: {\n                value: patternEmail,\n                message: getMess('M05')\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            helperText: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message,\n            label: \"Password\",\n            type: \"password\",\n            name: \"password\",\n            variant: \"outlined\",\n            required: true,\n            inputRef: register({\n              required: getMess('M01', 'Password')\n            }),\n            notRightLabel: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            helperText: (_errors$password2 = errors.password) === null || _errors$password2 === void 0 ? void 0 : _errors$password2.message,\n            label: \"Confirm password\",\n            type: \"password\",\n            name: \"confirmPassword\",\n            variant: \"outlined\",\n            required: true,\n            inputRef: register({\n              required: getMess('M01', 'Password')\n            }),\n            notRightLabel: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            text: \"Continue\",\n            type: \"submit\",\n            variant: \"contained\",\n            classes: \"button-register\",\n            disableElevation: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"log-in-link\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Already have an account?\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Log in\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Register, \"8n3hzKNPzV75wx9GYlyxubV2AQY=\", false, function () {\n  return [useForm];\n});\n\n_c = Register;\nexport { Register };\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/pages/Register/Register.jsx"],"names":["React","useState","Grid","Typography","useForm","get","Link","isEmpty","authService","Button","patternEmail","getMess","Field","user","logoLogin","Register","props","register","handleSubmit","errors","history","stateHistory","location","state","apiError","setApiError","expired","useEffect","userInfo","getUserInfo","unLogin","status","push","onSubmit","formState","then","login","res","saveUserStorage","token","catch","err","requiredNewPassword","code","email","message","required","pattern","value","password"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useForm } from 'react-hook-form';\r\nimport get from 'lodash/get';\r\nimport { Link } from 'react-router-dom';\r\nimport isEmpty from 'lodash/isEmpty';\r\nimport { authService } from '../../services/auth.service';\r\nimport { Button } from '../../components/button/button';\r\nimport { patternEmail } from '../../util/form';\r\nimport { getMess } from '../../util/message';\r\nimport { Field } from '../../components/Field/Field';\r\nimport { user } from '../../util/user';\r\nimport logoLogin from '../../assets/image/pinterest_PNG40.png';\r\nimport './Register.scss';\r\n\r\n\r\nfunction Register(props) {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const history = get(props, 'history', {});\r\n  const stateHistory = history.location.state || {};\r\n\r\n  const [apiError, setApiError] = useState(\r\n    stateHistory.expired ? getMess('M15') : ''\r\n  );\r\n\r\n  // eslint-disable-next-line consistent-return\r\n  //Tương tự componentDidMount.\r\n  React.useEffect(() => {\r\n    const userInfo = user.getUserInfo();\r\n    const unLogin = isEmpty(userInfo);\r\n    if (!unLogin) {\r\n      if (userInfo.status === 'defer') return history.push('/verify');\r\n      return history.push('/');\r\n    }\r\n  }, []);\r\n\r\n  const onSubmit = formState => {\r\n    authService.register(formState)\r\n      .then(() => {\r\n        authService\r\n          .login(formState)\r\n          .then(res => {\r\n            user.saveUserStorage(res.token);\r\n            return history.push('/verify', formState);\r\n          })\r\n          .catch(err => {\r\n            const requiredNewPassword = 401;\r\n\r\n            if (err.code === requiredNewPassword) {\r\n              return history.push(`/change-password/${formState.email}`);\r\n            }\r\n\r\n            return setApiError(err.message);\r\n          })\r\n      }).catch(err => {\r\n        if (err.code === 400) {\r\n          setApiError('That email address is already registered!!');\r\n        }\r\n        else if(err.code === 405){\r\n          setApiError('These passwords do not match!!');\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Grid container className=\"register\">\r\n      <Grid container className=\"register-content\">\r\n        <Grid item className=\"register__paper\">\r\n          <form\r\n            className=\"register__form\"\r\n            noValidate\r\n            onSubmit={handleSubmit(onSubmit)}\r\n          >\r\n            <Grid\r\n              container\r\n              direction=\"column\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n            >\r\n              <img src={logoLogin} className=\"logo\"></img>\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                Create Your Account!\r\n              </Typography>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                No credit card required\r\n              </Typography>\r\n            </Grid>\r\n            <p className=\"error-text\">{apiError}</p>\r\n            <Field\r\n              helperText={errors.email?.message}\r\n              variant=\"outlined\"\r\n              label=\"Email address\"\r\n              name=\"email\"\r\n              notRightLabel\r\n              required\r\n              inputRef={register({\r\n                required: getMess('M01', 'Email address'),\r\n                pattern: {\r\n                  value: patternEmail,\r\n                  message: getMess('M05'),\r\n                },\r\n              })}\r\n            />\r\n\r\n            <Field\r\n              helperText={errors.password?.message}\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              variant=\"outlined\"\r\n              required\r\n              inputRef={register({\r\n                required: getMess('M01', 'Password'),\r\n              })}\r\n              notRightLabel\r\n            />\r\n\r\n            <Field\r\n              helperText={errors.password?.message}\r\n              label=\"Confirm password\"\r\n              type=\"password\"\r\n              name=\"confirmPassword\"\r\n              variant=\"outlined\"\r\n              required\r\n              inputRef={register({\r\n                required: getMess('M01', 'Password'),\r\n              })}\r\n              notRightLabel\r\n            />\r\n            <Button\r\n              text=\"Continue\"\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              classes=\"button-register\"\r\n              disableElevation\r\n            />\r\n            <div className=\"log-in-link\" >\r\n              <div>\r\n                Already have an account?&nbsp;\r\n                <Link to=\"/login\">\r\n                  <p>Log in</p>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport { Register };\r\n"]},"metadata":{},"sourceType":"module"}