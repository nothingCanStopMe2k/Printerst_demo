{"ast":null,"code":"var _jsxFileName = \"/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/components/Header/Header.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PinterestIcon from \"@material-ui/icons/Pinterest\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport TextsmsIcon from \"@material-ui/icons/Textsms\";\nimport FaceIcon from \"@material-ui/icons/Face\";\nimport KeyboardArrowIcon from \"@material-ui/icons/KeyboardArrowDown\";\nimport Poper from \"@material-ui/core/Popper\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport { MenuItem } from \"@material-ui/core\";\nimport { Avatar } from \"@material-ui/core\";\nimport { pinterestScreenRight } from \"../../config/page\";\nimport { authService } from \"../../services/auth.service\";\nimport { userService } from \"../../services/user.service\";\nimport { user } from \"../../util/user\";\nimport PropTypes from \"prop-types\";\nimport get from \"lodash/get\";\nimport map from \"lodash/map\";\nimport \"./Header.scss\";\nimport unsplash from \"../../api/unsplash\";\nimport { apiPins } from \"../../redux\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 56px;\n  padding: 12px 4px 4px 12px;\n  background-color: white;\n  color: black;\n`;\n_c = Wrapper;\nconst LogoWrapper = styled.div`\n  .MuiSvgIcon-root {\n    color: #e60023;\n    font-size: 32px;\n    cursor: pointer;\n    display: flex;\n  }\n`;\n_c2 = LogoWrapper;\nconst Button = styled.div`\n  display: flex;\n  height: 48px;\n  min-width: 123px;\n  align-items: center;\n  justify-content: center;\n  border-radius: 24px;\n  cursor: pointer;\n`;\nconst HomePageButton = styled(Button)`\n  background-color: rgb(17, 17, 17);\n  a {\n    text-decoration: none;\n    color: white;\n    font-weight: 700;\n  }\n`;\n_c3 = HomePageButton;\nconst FollowingButton = styled(Button)`\n  background-color: white;\n  a {\n    text-decoration: none;\n    color: white;\n    font-weight: 700;\n  }\n  :hover {\n    background-color: #e1e1e1;\n  }\n`;\n_c4 = FollowingButton;\nconst SearchWrapper = styled.div`\n  flex: 1;\n`;\n_c5 = SearchWrapper;\nconst SearchBarWrapper = styled.div`\n  background-color: #efefef;\n  display: flex;\n  height: 40px;\n  width: 100%;\n  border-radius: 50px;\n  border: none;\n  padding-left: 10px;\n\n  form {\n    display: flex;\n    flex: 1;\n  }\n\n  form > input {\n    background-color: transparent;\n    border: none;\n    width: 100%;\n    margin-left: 5px;\n    font-size: 16px;\n  }\n\n  form > button {\n    display: none;\n  }\n\n  input:focus {\n    outline: none;\n  }\n`;\n_c6 = SearchBarWrapper;\nconst IconsWrapper = styled.div``;\n_c7 = IconsWrapper;\n\nconst Header = props => {\n  _s();\n\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [userProfile, setUserProfile] = useState();\n  const anchorRef = React.useRef(null); //useReflà một hàm trả về một đối tượng ref có thể thay đổi (Refs truy cập các nút DOM trong React)\n  // const [pins, setNewPins] = useState([]);\n\n  let pins = [];\n  const [input, setInput] = useState(\"\");\n\n  const getImages = term => {\n    return unsplash.get(\"https://api.unsplash.com/search/photos\", {\n      params: {\n        query: term\n      }\n    });\n  };\n\n  const getImagesFromPixabay = term => {\n    return axios.get(`https://pixabay.com/api/?key=21224893-c61153f1d9b5a52314e204800`, {\n      params: {\n        q: term\n      }\n    });\n  };\n\n  const onSearchSubmit = async e => {\n    e.preventDefault();\n    await getImages(input).then(res => {\n      let results = res.data.results;\n      let newPins = [...results];\n      newPins.sort(() => {\n        return 0.5 - Math.random();\n      });\n      pins = newPins;\n    });\n    console.log(\"Pins search: \", pins);\n    props.apiPins(pins);\n    return props.history.push(\"/home\");\n  };\n\n  const onSearchSubmitPixabay = async e => {\n    e.preventDefault();\n    await getImagesFromPixabay(input).then(res => {\n      let results = res.data.results;\n      let newPins = [...results];\n      newPins.sort(() => {\n        return 0.5 - Math.random();\n      });\n      pins = newPins;\n    });\n    console.log(\"Pins search: \", pins);\n    props.apiPins(pins);\n    return props.history.push(\"/home\");\n  };\n\n  const getNewPins = () => {\n    let promises = [];\n    let pinData = [];\n    let inpit = [\"piano\", \"code\", \"plane\"];\n    inpit.forEach(pinTerm => {\n      promises.push(getImages(pinTerm).then(res => {\n        let results = res.data.results;\n        pinData = pinData.concat(results);\n        pinData.sort(function (a, b) {\n          return 0.5 - Math.random();\n        });\n      }));\n    });\n    return Promise.all(promises).then(() => {\n      pins = pinData;\n    });\n  };\n\n  useEffect(async () => {\n    //Lấy ảnh đại diện\n    getNewPins().then(() => {\n      // console.log(\"Pins lúc này: \", pins);\n      props.apiPins(pins);\n    });\n    userService.getProfile().then(res => {\n      setUserProfile(res);\n    }).catch(err => {});\n  }, []);\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  const clickAnyway = () => {\n    setIsMenuOpen(false);\n  };\n\n  const handleLogout = () => {\n    authService.logout();\n    props.history.push(\"/login\");\n  };\n\n  const handleClose = path => {\n    toggleMenu();\n\n    if (path !== \"/signout\") {\n      props.history.push(path);\n    } else handleLogout();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(LogoWrapper, {\n      children: /*#__PURE__*/_jsxDEV(PinterestIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HomePageButton, {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        children: \"Homepage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FollowingButton, {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        children: \"Following\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchWrapper, {\n      children: /*#__PURE__*/_jsxDEV(SearchBarWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            onChange: e => setInput(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: onSearchSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconsWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(NotificationsIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(TextsmsIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => props.history.push(\"/profile\"),\n        children: !userProfile ? /*#__PURE__*/_jsxDEV(FaceIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n          style: {\n            height: 30,\n            width: 30\n          },\n          src: userProfile.profilePhoto\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: toggleMenu,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: anchorRef,\n          onClick: toggleMenu,\n          children: /*#__PURE__*/_jsxDEV(KeyboardArrowIcon, {\n            className: \"header-user-profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Poper, {\n      open: isMenuOpen,\n      transition: true,\n      anchorEl: anchorRef.current,\n      disablePortal: true,\n      className: \"poper\",\n      children: ({\n        TransitionProps,\n        placement\n      }) => /*#__PURE__*/_jsxDEV(Grow, { ...TransitionProps,\n        style: {\n          transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n            onClickAway: clickAnyway,\n            children: /*#__PURE__*/_jsxDEV(MenuList, {\n              children: map(pinterestScreenRight, nav => {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  onClick: () => handleClose(nav.path),\n                  children: nav.name\n                }, nav.path, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"ceSXdOoq7v6xZCNd4CJXIzAowdk=\");\n\n_c8 = Header;\nHeader.propTypes = {\n  history: PropTypes.instanceOf(Object)\n};\nHeader.defaultProps = {\n  history: {}\n}; //Phan cua redux\n\nconst mapStateToProps = state => {\n  return {\n    pins: state.pins\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    apiPins: pins => dispatch(apiPins(pins))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"LogoWrapper\");\n$RefreshReg$(_c3, \"HomePageButton\");\n$RefreshReg$(_c4, \"FollowingButton\");\n$RefreshReg$(_c5, \"SearchWrapper\");\n$RefreshReg$(_c6, \"SearchBarWrapper\");\n$RefreshReg$(_c7, \"IconsWrapper\");\n$RefreshReg$(_c8, \"Header\");","map":{"version":3,"sources":["/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/components/Header/Header.jsx"],"names":["React","useState","useEffect","styled","PinterestIcon","IconButton","SearchIcon","NotificationsIcon","TextsmsIcon","FaceIcon","KeyboardArrowIcon","Poper","Grow","Paper","ClickAwayListener","MenuList","MenuItem","Avatar","pinterestScreenRight","authService","userService","user","PropTypes","get","map","unsplash","apiPins","connect","axios","Wrapper","div","LogoWrapper","Button","HomePageButton","FollowingButton","SearchWrapper","SearchBarWrapper","IconsWrapper","Header","props","isMenuOpen","setIsMenuOpen","userProfile","setUserProfile","anchorRef","useRef","pins","input","setInput","getImages","term","params","query","getImagesFromPixabay","q","onSearchSubmit","e","preventDefault","then","res","results","data","newPins","sort","Math","random","console","log","history","push","onSearchSubmitPixabay","getNewPins","promises","pinData","inpit","forEach","pinTerm","concat","a","b","Promise","all","getProfile","catch","err","toggleMenu","clickAnyway","handleLogout","logout","handleClose","path","target","value","height","width","profilePhoto","current","TransitionProps","placement","transformOrigin","nav","name","propTypes","instanceOf","Object","defaultProps","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport styled from \"styled-components\";\n\nimport PinterestIcon from \"@material-ui/icons/Pinterest\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport TextsmsIcon from \"@material-ui/icons/Textsms\";\nimport FaceIcon from \"@material-ui/icons/Face\";\nimport KeyboardArrowIcon from \"@material-ui/icons/KeyboardArrowDown\";\nimport Poper from \"@material-ui/core/Popper\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport { MenuItem } from \"@material-ui/core\";\nimport { Avatar } from \"@material-ui/core\";\n\nimport { pinterestScreenRight } from \"../../config/page\";\nimport { authService } from \"../../services/auth.service\";\nimport { userService } from \"../../services/user.service\";\n\nimport { user } from \"../../util/user\";\nimport PropTypes from \"prop-types\";\nimport get from \"lodash/get\";\nimport map from \"lodash/map\";\nimport \"./Header.scss\";\nimport unsplash from \"../../api/unsplash\";\nimport { apiPins } from \"../../redux\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 56px;\n  padding: 12px 4px 4px 12px;\n  background-color: white;\n  color: black;\n`;\n\nconst LogoWrapper = styled.div`\n  .MuiSvgIcon-root {\n    color: #e60023;\n    font-size: 32px;\n    cursor: pointer;\n    display: flex;\n  }\n`;\n\nconst Button = styled.div`\n  display: flex;\n  height: 48px;\n  min-width: 123px;\n  align-items: center;\n  justify-content: center;\n  border-radius: 24px;\n  cursor: pointer;\n`;\n\nconst HomePageButton = styled(Button)`\n  background-color: rgb(17, 17, 17);\n  a {\n    text-decoration: none;\n    color: white;\n    font-weight: 700;\n  }\n`;\n\nconst FollowingButton = styled(Button)`\n  background-color: white;\n  a {\n    text-decoration: none;\n    color: white;\n    font-weight: 700;\n  }\n  :hover {\n    background-color: #e1e1e1;\n  }\n`;\n\nconst SearchWrapper = styled.div`\n  flex: 1;\n`;\n\nconst SearchBarWrapper = styled.div`\n  background-color: #efefef;\n  display: flex;\n  height: 40px;\n  width: 100%;\n  border-radius: 50px;\n  border: none;\n  padding-left: 10px;\n\n  form {\n    display: flex;\n    flex: 1;\n  }\n\n  form > input {\n    background-color: transparent;\n    border: none;\n    width: 100%;\n    margin-left: 5px;\n    font-size: 16px;\n  }\n\n  form > button {\n    display: none;\n  }\n\n  input:focus {\n    outline: none;\n  }\n`;\n\nconst IconsWrapper = styled.div``;\n\nconst Header = (props) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [userProfile, setUserProfile] = useState();\n  const anchorRef = React.useRef(null); //useReflà một hàm trả về một đối tượng ref có thể thay đổi (Refs truy cập các nút DOM trong React)\n  // const [pins, setNewPins] = useState([]);\n  let pins = [];\n  const [input, setInput] = useState(\"\");\n\n  const getImages = (term) => {\n    return unsplash.get(\"https://api.unsplash.com/search/photos\", {\n      params: { query: term },\n    });\n  };\n\n  const getImagesFromPixabay = (term) => {\n    return axios.get(\n      `https://pixabay.com/api/?key=21224893-c61153f1d9b5a52314e204800`,\n      {\n        params: { q: term },\n      }\n    );\n  };\n\n  const onSearchSubmit = async (e) => {\n    e.preventDefault();\n    await getImages(input).then((res) => {\n      let results = res.data.results;\n      let newPins = [...results];\n      newPins.sort(() => {\n        return 0.5 - Math.random();\n      });\n      pins = newPins;\n    });\n    console.log(\"Pins search: \", pins);\n    props.apiPins(pins);\n    return props.history.push(\"/home\");\n  };\n\n  const onSearchSubmitPixabay = async (e) => {\n    e.preventDefault();\n    await getImagesFromPixabay(input).then((res) => {\n      let results = res.data.results;\n      let newPins = [...results];\n      newPins.sort(() => {\n        return 0.5 - Math.random();\n      });\n      pins = newPins;\n    });\n    console.log(\"Pins search: \", pins);\n    props.apiPins(pins);\n    return props.history.push(\"/home\");\n  };\n\n  const getNewPins = () => {\n    let promises = [];\n    let pinData = [];\n    let inpit = [\"piano\", \"code\", \"plane\"];\n    inpit.forEach((pinTerm) => {\n      promises.push(\n        getImages(pinTerm).then((res) => {\n          let results = res.data.results;\n          pinData = pinData.concat(results);\n          pinData.sort(function (a, b) {\n            return 0.5 - Math.random();\n          });\n        })\n      );\n    });\n    return Promise.all(promises).then(() => {\n      pins = pinData;\n    });\n  };\n\n  useEffect(async () => {\n    //Lấy ảnh đại diện\n    getNewPins().then(() => {\n      // console.log(\"Pins lúc này: \", pins);\n      props.apiPins(pins);\n    });\n    userService\n      .getProfile()\n      .then((res) => {\n        setUserProfile(res);\n      })\n      .catch((err) => {});\n  }, []);\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n  const clickAnyway = () => {\n    setIsMenuOpen(false);\n  };\n\n  const handleLogout = () => {\n    authService.logout();\n    props.history.push(\"/login\");\n  };\n\n  const handleClose = (path) => {\n    toggleMenu();\n    if (path !== \"/signout\") {\n      props.history.push(path);\n    } else handleLogout();\n  };\n\n  return (\n    <Wrapper>\n      <LogoWrapper>\n        <PinterestIcon />\n      </LogoWrapper>\n      <HomePageButton>\n        <a href=\"/\">Homepage</a>\n      </HomePageButton>\n      <FollowingButton>\n        <a href=\"/\">Following</a>\n      </FollowingButton>\n      <SearchWrapper>\n        <SearchBarWrapper>\n          <IconButton>\n            <SearchIcon />\n          </IconButton>\n          <form>\n            <input type=\"text\" onChange={(e) => setInput(e.target.value)} />\n            <button type=\"submit\" onClick={onSearchSubmit}></button>\n          </form>\n        </SearchBarWrapper>\n      </SearchWrapper>\n      <IconsWrapper>\n        <IconButton>\n          <NotificationsIcon />\n        </IconButton>\n        <IconButton>\n          <TextsmsIcon />\n        </IconButton>\n        <IconButton onClick={() => props.history.push(\"/profile\")}>\n          {!userProfile ? (\n            <FaceIcon />\n          ) : (\n            <Avatar\n              style={{ height: 30, width: 30 }}\n              src={userProfile.profilePhoto}\n            ></Avatar>\n          )}\n        </IconButton>\n        <IconButton onClick={toggleMenu}>\n          <div ref={anchorRef} onClick={toggleMenu}>\n            <KeyboardArrowIcon className=\"header-user-profile\" />\n          </div>\n        </IconButton>\n      </IconsWrapper>\n      <Poper\n        open={isMenuOpen}\n        transition\n        anchorEl={anchorRef.current}\n        disablePortal\n        className=\"poper\"\n      >\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin:\n                placement === \"bottom\" ? \"center top\" : \"center bottom\",\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={clickAnyway}>\n                <MenuList>\n                  {map(pinterestScreenRight, (nav) => {\n                    return (\n                      <MenuItem\n                        key={nav.path}\n                        onClick={() => handleClose(nav.path)}\n                      >\n                        {nav.name}\n                      </MenuItem>\n                    );\n                  })}\n                </MenuList>\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Poper>\n    </Wrapper>\n  );\n};\n\nHeader.propTypes = {\n  history: PropTypes.instanceOf(Object),\n};\n\nHeader.defaultProps = {\n  history: {},\n};\n\n//Phan cua redux\nconst mapStateToProps = (state) => {\n  return {\n    pins: state.pins,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    apiPins: (pins) => dispatch(apiPins(pins)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n"]},"metadata":{},"sourceType":"module"}