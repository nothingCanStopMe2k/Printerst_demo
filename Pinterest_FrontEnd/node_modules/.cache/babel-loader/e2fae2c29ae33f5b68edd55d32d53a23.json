{"ast":null,"code":"var _jsxFileName = \"/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/components/Post/Post.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { get } from \"lodash/get\";\nimport { IconButton } from \"@material-ui/core\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { user } from \"../../util/user\";\nimport { getMess } from \"../../util/message\";\nimport { userService } from \"../../services/user.service\";\nimport \"./Post.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Post = ({\n  isPostOpen,\n  closePost\n}) => {\n  _s();\n\n  const [file, setFile] = useState(\"\");\n  const [file1, setFile1] = useState(\"\");\n  const [imagePreviewUrl, setImg] = useState(\"\");\n  const [userID, setUserID] = useState(\"\");\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n\n  const handleImageChange = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setFile(file);\n      setImg(reader.result);\n    };\n\n    setFile1(e.target.files[0]);\n    reader.readAsDataURL(file);\n  };\n\n  useEffect(async () => {\n    let userInfo = user.getUserInfo();\n    setUserID(userInfo.id);\n    console.log(userID);\n  }, []);\n\n  const onSubmit = data => {\n    // setApiError('');\n    const {\n      status,\n      file\n    } = data;\n    let formData = new FormData();\n    formData.append(\"userID\", userID);\n    formData.append(\"status\", status);\n    formData.append(\"linkFile\", file1);\n    console.log(formData);\n    userService.post(formData); // authService.updateRegisterProfile(formData)\n    //     .then(() => history.push(stateHistory.prePath || '/home'))\n    //     .catch((err) => setApiError(err.message));\n  };\n\n  let $imagePreview = imagePreviewUrl ? /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"imgPreview\",\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      src: imagePreviewUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this) : \"\";\n  return isPostOpen ? /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"post-title\",\n          children: \"Create Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: closePost,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            children: /*#__PURE__*/_jsxDEV(CancelIcon, {\n              fontSize: \"large\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://placehold.it/100/100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"status\",\n          ref: register,\n          placeholder: \"What's in your mind\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"file-input\",\n          type: \"file\",\n          ref: register,\n          name: \"file\",\n          onChange: e => handleImageChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), $imagePreview, /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"overlay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this) : \"\";\n};\n\n_s(Post, \"iqx6E7N7Uwr/Egpz/kx7SMbtGSU=\", false, function () {\n  return [useForm];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["/media/tuan/F6C4CFA0C4CF620B/Printerst_demo/Pinterest_FrontEnd/src/components/Post/Post.jsx"],"names":["React","useState","useEffect","useForm","get","IconButton","CancelIcon","user","getMess","userService","Post","isPostOpen","closePost","file","setFile","file1","setFile1","imagePreviewUrl","setImg","userID","setUserID","register","handleSubmit","handleImageChange","e","preventDefault","reader","FileReader","target","files","onloadend","result","readAsDataURL","userInfo","getUserInfo","id","console","log","onSubmit","data","status","formData","FormData","append","post","$imagePreview"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { get } from \"lodash/get\";\nimport { IconButton } from \"@material-ui/core\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\n\nimport { user } from \"../../util/user\";\nimport { getMess } from \"../../util/message\";\nimport { userService } from \"../../services/user.service\";\n\nimport \"./Post.scss\";\n\nconst Post = ({ isPostOpen, closePost }) => {\n  const [file, setFile] = useState(\"\");\n  const [file1, setFile1] = useState(\"\");\n  const [imagePreviewUrl, setImg] = useState(\"\");\n  const [userID, setUserID] = useState(\"\");\n  const { register, handleSubmit } = useForm();\n\n  const handleImageChange = (e) => {\n    e.preventDefault();\n\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setFile(file);\n      setImg(reader.result);\n    };\n\n    setFile1(e.target.files[0]);\n    reader.readAsDataURL(file);\n  };\n\n  useEffect(async () => {\n    let userInfo = user.getUserInfo();\n    setUserID(userInfo.id);\n    console.log(userID);\n  }, []);\n\n  const onSubmit = (data) => {\n    // setApiError('');\n\n    const { status, file } = data;\n\n    let formData = new FormData();\n    formData.append(\"userID\", userID);\n    formData.append(\"status\", status);\n    formData.append(\"linkFile\", file1);\n\n    console.log(formData);\n    userService.post(formData);\n    // authService.updateRegisterProfile(formData)\n    //     .then(() => history.push(stateHistory.prePath || '/home'))\n    //     .catch((err) => setApiError(err.message));\n  };\n\n  let $imagePreview = imagePreviewUrl ? (\n    <span className=\"imgPreview\">\n      <img src={imagePreviewUrl} />\n    </span>\n  ) : (\n    \"\"\n  );\n\n  return isPostOpen ? (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <section>\n        <div className=\"text\">\n          <h1 className=\"post-title\">Create Post</h1>\n          <span className=\"close\" onClick={closePost}>\n            <IconButton>\n              <CancelIcon fontSize=\"large\" />\n            </IconButton>\n          </span>\n          <hr />\n          <img src=\"http://placehold.it/100/100\" />\n          <textarea\n            name=\"status\"\n            ref={register}\n            placeholder=\"What's in your mind\"\n          ></textarea>\n          <input\n            className=\"file-input\"\n            type=\"file\"\n            ref={register}\n            name=\"file\"\n            onChange={(e) => handleImageChange(e)}\n          />\n          {$imagePreview}\n          <input type=\"submit\" value=\"post\" />\n        </div>\n      </section>\n      <div class=\"overlay\"></div>\n    </form>\n  ) : (\n    \"\"\n  );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}